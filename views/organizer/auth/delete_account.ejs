<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="Company Account Deletion Page" />
  <meta name="author" content="" />

  <title><%= title %> - Delete Company Account</title>

  <!-- Custom fonts for this template-->
  <link href="/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css" />
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,300,400,600,700,800,900"
    rel="stylesheet"
  />

  <!-- Custom styles for this template-->
  <link href="/css/sb-admin-2.min.css" rel="stylesheet" />

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body id="page-top">
  <!-- Page Wrapper -->
  <div id="wrapper">
    <!-- Sidebar -->
    <%- include('../../layout/corporatelayout/corporate_sidebar.ejs') %>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
      <!-- Main Content -->
      <div id="content" style="background-color: #deece8;">
        <!-- Topbar -->
        <%- include('../../layout/corporatelayout/corporate_navbar.ejs') %>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div
          class="container-fluid d-flex justify-content-center align-items-center"
          style="min-height: 75vh;"
        >
          <div class="card shadow-lg" style="width: 100%; max-width: 450px; margin-top: 50px;">
            <div
              class="card-header text-white text-center"
              style="background-color: #448d75; font-weight: 700; font-size: 1.5rem;"
            >
              Delete Company Account
            </div>
            <div class="card-body">
              <p class="text-danger text-center mb-4" style="font-weight: 600;">
                Warning: Deleting your company account is irreversible. All associated data will
                be lost.
              </p>

              <form id="deleteAccountForm" action="/organizer/delete/account" method="POST" novalidate>
                <div class="mb-3">
                  <label for="confirmEmail" class="form-label fw-semibold"
                    >Please enter your registered email to confirm:</label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="confirmEmail"
                    name="email"
                    placeholder="you@example.com"
                    required
                    autocomplete="email"
                  />
                  <div class="invalid-feedback">
                    Please enter a valid registered email address.
                  </div>
                </div>

                <button
                  type="submit"
                  class="btn btn-danger w-100 fw-bold"
                  style="font-size: 1.1rem;"
                >
                  Confirm Delete Account
                </button>
              </form>
            </div>
          </div>
        </div>
        <!-- /.container-fluid -->
      </div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <%- include('../../layout/corporatelayout/corporate_footer.ejs') %>
      <!-- End of Footer -->
    </div>
    <!-- End of Content Wrapper -->
  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Bootstrap core JavaScript-->
  <script src="/vendor/jquery/jquery.min.js"></script>
  <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="/vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="/js/sb-admin-2.min.js"></script>

  <!-- Client-side validation -->
  <script>
    (() => {
      'use strict';

      const form = document.getElementById('deleteAccountForm');

      form.addEventListener(
        'submit',
        function (event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          } else {
            event.preventDefault();
            // Show confirmation dialog before submitting
            Swal.fire({
              title: 'Are you sure?',
              text: 'This will permanently delete your company account and all associated data!',
              icon: 'warning',
              showCancelButton: true,
              confirmButtonColor: '#d33',
              cancelButtonColor: '#3085d6',
              confirmButtonText: 'Yes, delete it!',
              reverseButtons: true,
            }).then((result) => {
              if (result.isConfirmed) {
                form.submit();
              }
            });
          }
          form.classList.add('was-validated');
        },
        false
      );
    })();
  </script>
</body>

</html>
